//



//extrator============================
/*可解析媒体框架支持的各种文件格式的组件*/
service mediaextractor /system/bin/mediaextractor






//codec============================
/*非安全解码器和软件编码器位于编解码器进程中。
  安全解码器和硬件编码器位于 mediaserver（未变更）中。*/

//media.codec Service
service mediacodec /vendor/bin/hw/android.hardware.media.omx@1.0-service@android.hardware.media.omx@1.0-service.rc-->
main{
//treble
- omxStore = new implementation::OmxStore
- omxStore->registerAsService()
- omx = new implementation::Omx()
- omx->registerAsService()
//非treble
- MediaCodecService::instantiate()
}@main_codecservice.cpp


//加载用户自定义硬件解码
new Omx()-->new OMXMaster()-->addVendorPlugin-->
addPlugin("libstagefrighthw.so"){
- dlopen(libname)
- createOMXPlugin = dlsym("createOMXPlugin")
- addPlugin(createOMXPlugin()){
	- mPlugins.push_back(plugin)
	- mPluginByComponentName.add //遍历plugin中component
	}
}

//client
OMXClient::connect{
//treble
- connectTreble-->IOmx::getService(name)
//非treble
- connectLegacy-->getService("media.codec")
}@OMXClient.cpp







frameworks/av/services/mediacodec/main_codecservice.cpp
frameworks/av/media/libstagefright/OMXClient.cpp

//hardware中的omx没有使用
hardware/interfaces/media/omx/1.0/IOmx.hal
hardware/interfaces/media/omx/1.0/android.hardware.media.omx@1.0_genc++/gen/android/hardware/media/omx/1.0/OmxAll.cpp
