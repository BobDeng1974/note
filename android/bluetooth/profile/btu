//btu - Bluetooth Upper Layer  对L2CAP RFCOMM, SDP and the BTIf封装
BTU_StartUp{
 //创建队列
- btu_bta_msg_queue
- btu_general_alarm_queue
- btu_oneshot_alarm_queue
- btu_l2cap_alarm_queue
- bt_workqueue_thread = thread_new(BT_WORKQUEUE_NAME)//新线程
- thread_post(bt_workqueue_thread, btu_task_start_up)-->btu_task_start_up@btu_task.c
}@btu_init.c


btu_task_start_up{
- 
  /* Initialize the mandatory core stack control blocks
     (BTU, BTM, L2CAP, and SDP)                     */
   
- btu_init_core{
	- btm_init //btm初始
	- l2c_init
	- sdp_init
	- gatt_init
	- btm_ble_init
	}@btu_init.c
- BTE_InitStack
- bta_sys_init
  /*将队列关联到新线程BT_WORKQUEUE_NAME，btu_bta_msg_queue，btu_hci_msg_queue，
   btu_general_alarm_queue，btu_oneshot_alarm_queue,btu_l2cap_alarm_queue*/
- fixed_queue_register_dequeue(btu_bta_msg_queue,
      thread_get_reactor(bt_workqueue_thread),btu_bta_msg_ready)
}@btu_task.c








